<!DOCTYPE html>
<head>

<meta charset="UTF-8">

<style>
	textarea, button{
		vertical-align: top;
	}
</style>
</head>
<body>
	<div id="result">
	</div>


	<textarea id="text" style="width: 70%; height: 600px;"></textarea>
	<button id="get" style="width: 10%; height: 600px;">Get</button>
	<button id="sort">Sort</button>
</body>
<script src="../js/vendor/xregexp.js"></script>
<script src="../js/vendor/underscore-min.js"></script>



<script>
var $result = document.querySelector('#result');
var $button = document.querySelector('#get');
var $text = document.querySelector('#text');
var $sort = document.querySelector('#sort');
var arrayAll = [];


$button.onclick = function(){
	var input = $text.value;

	//Remove junk
	$text.value = XRegExp.replace($text.value, /(Job|Friday|Saturday|Sunday|Monday|Tuesday|Wednesday|Thursday|Employee Schedule|348 Printed For.+?|Page.+?|Executed On.+?|\d{1,2}\/\d{1,2}\/\d{4}.*?)\n/g, '');

	//Loop through names
	var prevIndex = 0;
	var arrayMatch = XRegExp.forEach(input, /\w.+?,\s\w.+?\s\w/g, function(match, i){

		var person = {};
		if(i > 0)
			_.last(arrayAll)['data'] = $text.value.slice(prevIndex,match.index);

		person['name'] = match[0];
		prevIndex=match.index+person['name'].length;


		arrayAll.push(person);
		console.log(match);
	});

	showResult();


}








$sort.onclick = function(){
	arrayAll = _.sortBy(arrayAll, function(a){return a;});
	showResult();


}




function showResult(){
	result.innerHTML = JSON.stringify(arrayAll);
}

</script>
